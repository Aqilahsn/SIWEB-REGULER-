<!DOCTYPE html>
<!-- 
Saya mengerjakan tugas ini sendiri tanpa melakukan kecurangan seperti menggunakan
atau menduplikasi kode program yang ada. Jika saya melakukan kecurangan dalam
pengerjaan tugas ini, maka saya siap menerima sanksi atau hukuman dari dosen
mata kuliah dan Tuhan / Allah SWT.
-->
<html lang="id">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Preferensi Warna</title>
<style>
  * { margin: 0; padding: 0; box-sizing: border-box; }

  body {
    background-color: 
    #ffffff;
    display: flex;
    justify-content: center;
    align-items: center;
    min-height: 100vh;
    font-family: Arial, sans-serif;
  }

  .container {
    background-color: var(--bg-color, #4472C4);
    padding: 30px;
    width: 90%;
    max-width: 1200px;
  }

  h1 {
    color: var(--text-color, #CC0000);
    font-size: 2.2rem;
    font-weight: bold;
    font-style: italic;
    margin-bottom: 20px;
  }

  fieldset {
    border: 1px solid var(--text-color, #CC0000);
    padding: 20px 30px;
    margin-bottom: 15px;
  }

  legend {
    color: var(--text-color, #CC0000);
    font-weight: bold;
    padding: 0 5px;
  }

  .color-row {
    display: flex;
    align-items: center;
    margin: 12px 0;
    gap: 10px;
  }

  .color-row label {
    color: var(--text-color, #CC0000);
    font-size: 1rem;
    font-weight: bold;
  }

  .color-swatch {
    width: 60px;
    height: 28px;
    border: 2px solid #999;
    cursor: pointer;
    display: inline-block;
  }

  button.simpan {
    background: #f0f0f0;
    border: 1px solid #999;
    padding: 5px 14px;
    cursor: pointer;
    font-size: 0.95rem;
  }

  /* Modal Overlay */
  .modal-overlay {
    display: none;
    position: fixed;
    top: 0; left: 0;
    width: 100%; height: 100%;
    background: rgba(0,0,0,0.5);
    z-index: 100;
    justify-content: center;
    align-items: center;
  }

  .modal-overlay.active {
    display: flex;
  }

  .modal {
    background: #2d2d2d;
    border-radius: 6px;
    padding: 16px;
    width: 440px;
  }

  .modal-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 14px;
  }

  .modal-header button {
    padding: 6px 16px;
    border: none;
    border-radius: 4px;
    cursor: pointer;
    font-size: 0.9rem;
  }

  .btn-cancel {
    background: #555;
    color: #fff;
  }

  .btn-select {
    background: #2e7d32;
    color: #fff;
  }

  .modal-title {
    color: #fff;
    font-size: 1rem;
    font-weight: bold;
  }

  .color-grid {
    display: grid;
    grid-template-columns: repeat(9, 1fr);
    gap: 4px;
    margin-bottom: 10px;
  }

  .color-cell {
    width: 100%;
    aspect-ratio: 1;
    cursor: pointer;
    border: 2px solid transparent;
    border-radius: 2px;
    position: relative;
  }

  .color-cell:hover {
    border-color: #fff;
  }

  .color-cell.selected::after {
    content: 'âœ“';
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    color: #fff;
    font-size: 14px;
    text-shadow: 0 0 2px #000;
  }

  .custom-label {
    color: #ccc;
    font-size: 0.85rem;
    margin: 8px 0 4px;
  }

  .custom-row {
    display: flex;
    gap: 4px;
    align-items: center;
  }

  .add-custom {
    width: 36px;
    height: 36px;
    background: #555;
    color: #fff;
    border: none;
    font-size: 1.4rem;
    cursor: pointer;
    border-radius: 2px;
    display: flex;
    align-items: center;
    justify-content: center;
  }

  #custom-color-input {
    display: none;
  }
</style>
</head>
<body>

<div class="container" id="app">
  <h1>Preferensi Warna</h1>
  <fieldset>
    <legend>Warna</legend>
    <div class="color-row">
      <label>1. Warna latarbelakang</label>
      <span class="color-swatch" id="bg-swatch" style="background-color: #4472C4;" onclick="openModal('bg')"></span>
    </div>
    <div class="color-row">
      <label>2. Warna teks</label>
      <span class="color-swatch" id="text-swatch" style="background-color: #CC0000;" onclick="openModal('text')"></span>
    </div>
  </fieldset>
  <button class="simpan" onclick="saveColors()">Simpan</button>
</div>


<div class="modal-overlay" id="modal">
  <div class="modal">
    <div class="modal-header">
      <button class="btn-cancel" onclick="closeModal()">Cancel</button>
      <span class="modal-title">Choose a color</span>
      <button class="btn-select" onclick="selectColor()">Select</button>
    </div>
    <div class="color-grid" id="color-grid"></div>
    <div class="custom-label">Custom</div>
    <div class="custom-row">
      <button class="add-custom" onclick="document.getElementById('custom-color-input').click()">+</button>
      <div id="custom-swatches" class="color-grid" style="flex:1; margin:0;"></div>
    </div>
    <input type="color" id="custom-color-input" onchange="addCustomColor(this.value)">
  </div>
</div>

<script>
  const PRESET_COLORS = [
    '#CC0000','#E65C00','#E6B800','#33CC00','#6699CC','#CC66CC','#CC8800','#666666','#CCCCCC',
    '#FF0000','#FF6600','#FFCC00','#00CC00','#5577BB','#9944BB','#AA6600','#444444','#AAAAAA',
    '#990000','#CC4400','#CC9900','#009900','#334488','#773399','#885500','#222222','#888888',
    '#000000','#333333','#555555','#777777','#999999','#BBBBBB','#DDDDDD','#FFFFFF','#F5F5F5',
  ];

  let customColors = [];
  let currentTarget = null;
  let selectedColor = null;

  const bgColor = { value: '#4472C4' };
  const textColor = { value: '#CC0000' };

  function applyColors() {
    document.documentElement.style.setProperty('--bg-color', bgColor.value);
    document.documentElement.style.setProperty('--text-color', textColor.value);
    document.getElementById('bg-swatch').style.backgroundColor = bgColor.value;
    document.getElementById('text-swatch').style.backgroundColor = textColor.value;
  }

  function openModal(target) {
    currentTarget = target;
    selectedColor = target === 'bg' ? bgColor.value : textColor.value;
    renderGrid();
    document.getElementById('modal').classList.add('active');
  }

  function closeModal() {
    document.getElementById('modal').classList.remove('active');
    currentTarget = null;
    selectedColor = null;
  }

  function selectColor() {
    if (!selectedColor || !currentTarget) return;
    if (currentTarget === 'bg') bgColor.value = selectedColor;
    else textColor.value = selectedColor;
    closeModal();
  }

  function saveColors() {
    applyColors();
  }

  function renderGrid() {
    const grid = document.getElementById('color-grid');
    grid.innerHTML = '';
    PRESET_COLORS.forEach(c => {
      const cell = document.createElement('div');
      cell.className = 'color-cell' + (c.toLowerCase() === selectedColor.toLowerCase() ? ' selected' : '');
      cell.style.backgroundColor = c;
      cell.onclick = () => {
        selectedColor = c;
        renderGrid();
      };
      grid.appendChild(cell);
    });

    const customGrid = document.getElementById('custom-swatches');
    customGrid.innerHTML = '';
    customColors.forEach(c => {
      const cell = document.createElement('div');
      cell.className = 'color-cell' + (c.toLowerCase() === selectedColor.toLowerCase() ? ' selected' : '');
      cell.style.backgroundColor = c;
      cell.onclick = () => {
        selectedColor = c;
        renderGrid();
      };
      customGrid.appendChild(cell);
    });
  }

  function addCustomColor(color) {
    if (!customColors.includes(color)) customColors.push(color);
    selectedColor = color;
    renderGrid();
  }

  applyColors();
</script>
</body>
</html>